<polymer-element name="player-card"
                 attributes="name initialGamesJson">
    <template>
        <div class="player">
            <h2>{{name}}</h2>
            <style scoped>
                a { color: wheat;}
                .flexed ol {
                    display:flex;
                    overflow-x:scroll;
                    margin:0;
                    padding:0;
                    list-style-type: none;
                }
                ::-webkit-scrollbar {
                    width:  0.5em;
                    height: 0.5em;
                }

                ::-webkit-scrollbar-thumb {
                    background: white;
                }

                ::-webkit-scrollbar-track {
                    background: slategray;
                }
                .flexed ol li {
                    flex: 10 0 auto;
                    margin-right:1em;
                }
                .flexed ol li a {
                    display:block;
                }
                #duels ol li {
                    width:20em;
                }
                a:focus {
                    background:#1b325f;
                    outline: 0;
                }
                #duels.hidden {
                    display:none;
                }
            </style>
            <div id="duels" class="{{ { hidden: duels.items.length == 0, flexed: true } | tokenList}}">
                    <h2>Duels</h2>
                    <ol>
                        <template repeat="{{duel in duels.items}}">
                            <li id="{{duel.globalId}}" class="{{ {active: duel == activeItem} | tokenList}}">
                                <a href="/player/drakas/?duel={{duel.id}}">
                                    <h3>{{duel['left-player-name']}} vs {{duel['right-player-name']}}</h3>
                                    <h4>{{duel['left-player-score']}} vs {{duel['right-player-score']}}</h4>
                                    <h5>{{duel.mode}} @ {{duel.map}}</h5>
                                </a>
                            </li>
                        </template>
                    </ol>
                </div>

            <duel-detailed-card duelId="{{currentDuel.id}}" atTime="{{currentDuel.atTime}}" leftPlayerScore="{{currentDuel['left-player-score']}}"
                                map="{{currentDuel.map}}" mode="{{currentDuel.mode}}" leftPlayerName="{{currentDuel['left-player-name']}}"
                                rightPlayerScore="{{currentDuel['right-player-score']}}" rightPlayerName="{{currentDuel['right-player-name']}}"
                                leftPlayerId="{{currentDuel['left-player-id']}}"
                                rightPlayerId="{{currentDuel['right-player-id']}}"
                    >

        </div>
    </template>
    <script>
        Polymer("player-card", {

            initialGamesJsonChanged: function(_, v) {
                this.duels = {
                    items: JSON.parse(v)
                };
                this.currentDuel = this.duels.items[0];
            },
            attached: function() {

                scrollHorizons(unwrap(this.shadowRoot.querySelector('#duels ol')));
            }

        })
    </script>
</polymer-element>